# 20.  장치 컨트롤러와 장치 드라이버

### CPU - 입출력장치 정보 주고받기

입출력 장치는 CPU, 메모리보다 다루기가 까다롭다. 

1. 입출력장치에는 종류가 너무 많다. 
장치마다 속도, 데이터 전송 형식 등이 다양하다. → 정보를 주고받는 방식을 규격화하기 어렵다. 
2. 일반적으로 CPU와 메모리의 데이터 전송률은 높지만 입출력장치의 데이터 전송률은 낮다. 
CPU는 데이터를 주고받을 때 1초에도 수많은 데이터를 주고받을 수 있다

*전송률 transfer rate란 데이터를 어마나 빨리 교환할 수 있는지를 나태내는 지표이다. 

### 장치 컨트롤러

입출력장치는 위와 같은 이유로 장치 컨트롤러를 통해 컴퓨터와 연결된다. 

- 하드웨어이다.
- 모든 입출력 장치는 하나 이상의 장치 컨트롤러와 연결되어있다.
- 장치 컨트롤러 하나에 여러 개의 입출력 장치가 연결되어 있을 수 있다.
- 어떻게 생겼나?
    
    <img width="483" alt="무제" src="https://user-images.githubusercontent.com/79884004/230765163-6e472325-ce41-4a43-b374-c88117357142.png">
    

*장치 컨트롤러 입출력 제어기, 입출력 모듈

### 장치 컨트롤러의 역할

- **CPU와 입출력장치 간의 통신 중개**
규격화 어려움을 해결
- 오류 검출
컨트롤러에 연결된 임출력 장치의 문제를 검출
- 데이터 버퍼링
    - 버퍼링 ?
    전송률이 높은 장치와 낮은 장치 사이에 주고받는 데이터를 **버퍼라는 임시 저장공간에 저장**하여 전송률을 비슷하게 맞추는 방법이다.

### 장치 컨트롤러의 구조

버스 ↔ 장치 컨트롤러 ↔ 입출력장치 

- 버스에 연결돼서 정보를 주고받게 된다.
- 데이터 레지스터
    - CPU와 입출력장치 사이에 주고받을 데이터가 담기는 레지스터 (버퍼)
    - RAM을 사용하기도 한다.
- 상태 레지스터
    - **상태 정보 저장**
        - 입출력자이착 입출력 작업을 할 준비가 되었는지
        - 입출력 작업이 완료되었는지
        - 입출력장치에 오류는 없는지 등의 상태 정보 (오류 검출)
- 제어 레지스터
    - 입출력장치가 **수행할 내용에 대한 제어 정보**

상태 레지스터와 제어 레지스터는 하나의 레지스터(상태/제어 레지스터)로 사용되기도 한다. 

### 장치 드라이버

장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게하는 프로그램 

- 장치 컨트롤러 → 입출력 장치를 연결하기 위한 **하드웨어적인 통로**
- 장치 드라이버 → 입출력장치를 연결하기 위한 **소프트웨어적인 통로**

ex. 장치 드라이버 설치 x → 해당 입출력 장치 사용 x 

ex. CPU가 프린터기의 장치 컨트롤러 동작방법을 모를 때 장치 드라이버를 통해 장치 컨트롤러를 제어 및 동작

장치 드라이버를 인식하고 실행시켜주는 주체는 **운영체제**이다.
다음장에 운영체제에 대해 알아보자!! Go
